{% extends "base.html" %}

{% set current_page = 'game' %}

{% block content %}

  {% import "macros/forms.html" as forms %}
  {% import "macros/list_games.html" as list_games %}

  {% if message is not null %}
    <div class="alert alert-success">
      {{message}}
    </div>
  {% endif %}

  <h2>Pelatut pelit</h2>

  <br>

  {{forms.new_game(courses, players, base_path)}}

  <br>

  <p>
    Tuloskortit ovat päivämäärän perusteella laskevassa järjestyksessä.
  </p>

  {{list_games.list_games(games, players, base_path)}}

  <nav>
    <ul class="pagination">
      <li class="{% if not prev_page %}disabled{% endif %}">
          <a class="{% if not prev_page %}disabled_link{% endif %}" href="{{base_path}}/game?page={{prev_page}}">
            <span aria-hidden="true">«</span>
            <span class="sr-only">Previous</span>
          </a>
      </li>
      {% if pages > 0 %}
        {% for page in 1..pages %}
          <li class="{% if curr_page == page %}active{% endif %}">
            <a class="{% if curr_page == page %}disabled_link{% endif %}" href="{{base_path}}/game?page={{page}}{% if courseid_param %}&course={{courseid_param}}{% endif %}{% if playerid_param %}&player={{playerid_param}}{% endif %}">{{page}}</a>
          </li>
        {% endfor %}
      {% else %}
        <!-- For pages with no content (pages=0) -->
        <li class="active">
          <a class="disabled_link" href="{{base_path}}/game?page={{page}}{% if courseid_param %}&course={{courseid_param}}{% endif %}{% if playerid_param %}&player={{playerid_param}}{% endif %}">1</a>
        </li>
      {% endif %}
      <li class="{% if not next_page %}disabled{% endif %}">
        <a class="{% if not next_page %}disabled_link{% endif %}" href="{{base_path}}/game?page={{next_page}}{% if courseid_param %}&course={{courseid_param}}{% endif %}{% if playerid_param %}&player={{playerid_param}}{% endif %}">
          <span aria-hidden="true">»</span>
          <span class="sr-only">Next</span>
        </a>
      </li>
    </ul>
  </nav>

{% endblock %}
