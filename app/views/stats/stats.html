{% extends "base.html" %}
{% block content %}

  {% import "macros/high_scores.html" as high_scores_macro %}

  {% if error %}
    <div class="alert alert-danger">
      {{error}}
    </div>
  {% endif %}

  {% if message %}
    <div class="alert alert-success" id="message-success">
      {{message}}
    </div>
  {% endif %}

  <section>
  	<h2>Tilastoja</h2>

    <br>

  	<table style="width:530px">
          <tr>
            	<td>Pelejä:</td>
            	<td>{{game_count}}</td>
          </tr>
          <tr>
            	<td>Heittoja:</td>
            	<td>{{throw_count}}</td>
          </tr>
          <tr>
            	<td>Viimeisin peli: </td>
            	<td>{% if game_count > 0 %}{{latest_game}}{% else %}Ei pelejä{% endif %}</td>
          </tr>
          <tr>
            <!-- Empty row -->
            <td height=30></td>
          </tr>

          {% if popular_courses | length == 0 %}
            <tr>
              <td>Suosituimmat radat (eniten pelejä):</td>
              <td>Ei pelejä</td>
            </tr>
          {% else %}
            <tr>
              <td>Suosituimmat radat (eniten pelejä):</td>
              <td>1. {{popular_courses[0].name}} ({{popular_courses[0].occurance}})</td>
            </tr>
            <tr>
              <td></td>
              <td>2. {{popular_courses[1].name}} ({{popular_courses[1].occurance}})</td>
            </tr>
            <tr>
              <td></td>
              <td>3. {{popular_courses[2].name}} ({{popular_courses[2].occurance}})</td>
            </tr>
          {% endif %}
    	</table>

  </section>

  <br>

  <a href="{{base_path}}/info" class="btn btn-default" role="button">Tietoa</a>

  <br><br>

  <h3>Omat ennätykset</h3>

  <br>

  {{high_scores_macro.display_high_scores(high_scores, base_path, user_logged_in)}}

{% endblock %}
